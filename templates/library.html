{% extends 'base.html' %} {% block content %}
<div class="container-fluid library-container">
    <!-- PAGE TITLE START -->
    <div class="row title-row">
        <div class="col-6">
            <h1> LIBRARY </h1>
        </div>
    </div>
    <!-- PAGE TITLE END -->
    
    <!-- SEARCH BOOKS & CREATE BOOK START -->
    <div class="row book-search-row">
        <!-- SEARCH FORM START -->
        <form action="{{ url_for('library_searched') }}" method="POST" class="col-12 search-bar">
            <label for="search"> SEARCH FOR A BOOK </label>
            <input type="search" id="search" name="search" value='{{request.form.search}}' />
            <button type="submit" name="action">SEARCH</button>
        </form>
        <!-- SEARCH FORM END -->
        
        <!-- CREATE BOOK START -->
        <div class="col-12">
            <p id='create-book-p'> ...or simply create one <a href='{{ url_for("insert_book") }}'> HERE </a> </p>
        </div>
        <!-- CREATE BOOK END -->
    </div>
    <!-- SEATCH BOOKS & CREATE BOOK END -->
    
    <!-- DISPLAY EACH BOOK IN DB START -->
    {% for book in books %}
    <div class="row books-row">
        <div class="col-12">
            <span> TITLE </span>
            <h1> {{book.title}} </h1>
        </div>
        <div class="col-6">
            <span> AUTHOR </span>
            <p> {{ book.author_name }} </p>
        </div>
        <div class="col-6">
            <span> GENRE </span>
            <p> {{ book.genre }} </p>
        </div>
        <div class="col-4">
            <span> PAGES </span>
            <p> {{ book.pages }} </p>
        </div>
        <!--<div class="col-4">-->
        <!--    <span> LIKES </span>-->
        <!--    <p> {{ book.likes }} </p>-->
        <!--</div>-->
        <!--<div class="col-4">-->
        <!--    <span> DISLIKES </span>-->
        <!--    <p> {{ book.dislikes }} </p>-->
        <!--</div>-->
        <div class="col-12">
            <span> REVIEWS </span> {% for review in book.reviews %}
            <p> {{review}} </p>
            {% endfor %}
        </div>
        <div class="col-6">
            <a id='review-btn' href='{{ url_for("leave_review", book_id=book._id) }}'>  LEAVE A REVIEW <i class="fas fa-comment-medical"></i> </a>
        </div>
        {% if session %}
        <div class="col-6">
            <a id='book-collection-btn' href='{{ url_for("add_collection", book_id=book._id) }}'>  ADD BOOK TO COLLECTION <i class="fas fa-book-medical"></i> </a>
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <ul class=flashes>
                        {% for message in messages %}
                            <li>{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            {% endwith %}
        </div>
        {% endif %}
    </div>
    {% endfor %}
    <!-- DISPLAY EACH BOOK IN DB END -->
</div>
{% endblock %}
